import{u,j as t,m as h,n as b,o as v,p as w,r as I,q as j,A as p,a as y,l as g}from"./index-D1OfDGO-.js";import{N as c}from"./Notify-DE3Uoygy.js";import{I as N,d as P,a as S}from"./DashboardPage-BXBJ5iD-.js";import"./index-67PkrThZ.js";const k=({songs:s,allSongs:i,dispatch:r,song:e,handleFav:d,favSongs:a,i:l})=>{var f;const n=u(m=>m.song.playSong);let x=e.id||e.songId;const o=((f=n[0])==null?void 0:f.id)===x||!1;return t.jsxs("div",{onClick:()=>{r(s?h(!0):h(!1)),r(b(!0)),r(v(i)),r(w(s?e.songId:e.id))},style:{width:"min(99%,500px)",background:"linear-gradient(to right, rgba(0,0,0,.55),rgba(0,0,0,.55))"},className:`${o&&"gradient"} text-white  shadow-black border-[1px] border-pink-600 h-[56px]  flex rounded-[28px] gap-3  cursor-pointer items-center relative  z-0`,children:[t.jsx(N,{id:(e==null?void 0:e.id)||(e==null?void 0:e.songId),className:`w-[54px] h-[54px] rounded-[100%] ${o&&"active"} `,src:s?e.songImage:e.image[2].url,alt:""}),t.jsxs("h2",{className:"text-lg capitalize ",children:[l+1,". ",s?e.songName.slice(0,16):e.name.slice(0,16)]}),t.jsx(P,{onClick:m=>d(m,e),style:{position:"absolute",right:"60px",color:a.some(m=>s?m.songId===e.songId:m.songId===e.id)?"#ea0b91":"white"}}),t.jsx(T,{song:e,songs:s})]},s?e.songId:e.id)},T=({songs:s,song:i})=>{const[r,e]=I.useState("");return t.jsxs(t.Fragment,{children:[t.jsx(S,{onClick:d=>{d.stopPropagation(),e(!0)},className:"absolute right-5 w-5 "}),r&&t.jsx(C,{setIsActive:e,song:i,songs:s})]})},C=({setIsActive:s,song:i,songs:r})=>{const e=u(a=>a.fav.customPlaylists),d=async a=>{s(!1),c("success","Please wait...",1300);const l={songId:r?i.songId:i.id,songName:r?i.songName:i.name,songImage:r?i.songImage:i.image[2].url},n=await p.addSongToPlaylist("/addSong/"+a,l);n.success?setTimeout(()=>c("success",n.message),2e3):setTimeout(()=>{c("error",n.message)},2e3)};return j.createPortal(t.jsx("div",{onClick:a=>{a.stopPropagation(),s(!1)},className:"h-screen w-screen bg-[rgba(0,0,0,.7)] fixed top-0 left-0",children:t.jsxs("div",{onClick:a=>{a.stopPropagation()},style:{scrollbarWidth:"none"},className:"w-48 px-2 py-1 h-48 z-90 bg-white rounded-lg text-black fixed top-[50%] left-[50%] translate-x-[-50%] translate-y-[-50%] ",children:[t.jsx("h2",{className:"",children:"Add to"}),t.jsx("ul",{className:"overflow-scroll h-[100%]  flex flex-col justify-center items-start px-4 gap-2 py-5",children:e==null?void 0:e.map((a,l)=>t.jsx(t.Fragment,{children:t.jsxs("li",{style:{scrollbarWidth:"2px"},onClick:()=>d(a._id),className:"text-center text-sm p-1 font-semibold hover:font-extraboldx hover:bg-pink-400 rounded-lg",children:[l+1,". ",a.name]},a._id)}))}),t.jsx("button",{className:"absolute right-2 top-1 rounded-xl bg-red-600 text-white px-1 py-[2px]",onClick:()=>{s(!1)},children:"close"})]})}),document.getElementById("portals"))},W=({songs:s})=>{const i=y();let r=u(a=>a.song.allSongs);const e=u(a=>a.fav.favList),d=async(a,l)=>{if(c("success","Please wait...",1300),a.stopPropagation(),e.some(o=>o.songId===l.songId)){const o=await p.removeFav("/fav/"+l._id);return o.success?c("success",o.message):c("error",o.message),i(g())}let n={songId:l.id,songName:l.name,songImage:l.image[2].url};const x=await p.addNewFav("/fav/new",n);x.success?setTimeout(()=>{c("success",x.message)},2e3):setTimeout(()=>c("error",x.message),2e3),i(g())};return s&&(r=s),t.jsx("div",{style:{width:"min(100vw,600px)",scrollbarWidth:"none"},className:"flex flex-col gap-2 items-center  h-[85vh]  overflow-scroll pb-[310px]",children:r&&r.map((a,l)=>t.jsx(k,{songs:s,allSongs:r,dispatch:i,song:a,handleFav:d,favSongs:e,i:l},s?a.songId+l:a.id+l))})};export{W as ShowAllSongs,W as default};
