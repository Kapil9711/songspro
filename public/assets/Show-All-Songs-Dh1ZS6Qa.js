import{r as f,j as l,y as g,t as b,v,a as x,A as h,u as w,q as p,x as y}from"./index-nO-H62NG.js";import{N as n}from"./Notify-DFKgAlbX.js";import{I,H as N}from"./Favorite-QXLk7CVh.js";const j=({songs:t,dispatch:a,song:e,customtheme:i,handleFav:d,favSongs:r,i:s})=>{const[o,u]=f.useState("");return l.jsxs("div",{onClick:()=>{a(t?g(!0):g(!1)),a(b(!0)),a(v(t?e.songId:e.id))},style:{width:"min(99%,500px)",background:"linear-gradient(to right, rgba(0,0,0,.5),rgba(0,0,0,.5))"},className:` text-[${i.text}] bg-[${i.surface}] shadow-black border-[1px] border-pink-600 h-[56px]  flex rounded-[28px] gap-3  cursor-pointer items-center relative `,children:[l.jsx("img",{className:"w-[54px] h-[54px] rounded-[100%] ",src:t?e.songImage:e.image[2].url,alt:""}),l.jsxs("h2",{className:"text-lg capitalize ",children:[s+1,". ",t?e.songName.slice(0,16):e.name.slice(0,16)]}),l.jsx(I,{onClick:c=>d(c,e),style:{position:"absolute",right:"60px",color:r.some(c=>t?c.songId===e.songId:c.songId===e.id)?"#ea0b91":"white"}}),l.jsx(N,{onClick:c=>{c.stopPropagation(),u(!0)},className:"absolute right-5 w-5 "}),o&&l.jsx(k,{setIsActive:u,song:e,songs:t})]},t?e.songId:e.id)},k=({setIsActive:t,song:a,songs:e})=>{const i=x(r=>r.fav.customPlaylists),d=async r=>{t(!1);const s={songId:e?a.songId:a.id,songName:e?a.songName:a.name,songImage:e?a.songImage:a.image[2].url},o=await h.addSongToPlaylist("/addSong/"+r,s);o.success?n("success",o.message):n("error",o.message)};return l.jsxs("div",{onClick:r=>{r.stopPropagation()},style:{scrollbarWidth:"none"},className:"w-40 px-2 py-1 h-40 z-10 bg-white rounded-lg text-black absolute right-10 top-10 ",children:[l.jsx("h2",{className:"",children:"Add to"}),l.jsx("ul",{className:"overflow-scroll h-[100%]  flex flex-col gap-2 py-5",children:i==null?void 0:i.map((r,s)=>l.jsx(l.Fragment,{children:l.jsxs("li",{style:{scrollbarWidth:"2px"},onClick:()=>d(r._id),className:"text-center font-semibold hover:font-extraboldx hover:bg-pink-400 rounded-sm",children:[s+1,". ",r.name]},r._id)}))}),l.jsx("button",{className:"absolute right-2 top-1 bg-red-600 text-white px-1 py-[2px]",onClick:r=>{t(!1)},children:"close"})]})},C=({songs:t})=>{const a=w(),e=x(s=>s.theme.value);let i=x(s=>s.song.allSongs);const d=x(s=>s.fav.favList);f.useEffect(()=>{a(p()),a(y())},[]);const r=async(s,o)=>{if(s.stopPropagation(),d.some(m=>m.songId===o.songId)){const m=await h.removeFav("/fav/"+o._id);return m.success?n("success",m.message):n("error",m.message),a(p())}let u={songId:o.id,songName:o.name,songImage:o.image[2].url};const c=await h.addNewFav("/fav/new",u);c.success?n("success",c.message):n("error",c.message),a(p())};return t&&(i=t),l.jsx("div",{style:{width:"min(100vw,600px)",scrollbarWidth:"none"},className:"flex flex-col gap-2 items-center  h-[85vh]  overflow-scroll pb-72",children:i&&i.map((s,o)=>l.jsx(j,{songs:t,dispatch:a,song:s,customtheme:e,handleFav:r,favSongs:d,i:o},t?s.songId:s.id))})};export{C as ShowAllSongs,C as default};
