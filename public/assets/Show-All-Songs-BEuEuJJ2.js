import{r as I,a as x,j as t,m as b,n as y,o as N,p as j,A as h,u as S,l as f,k}from"./index-MaS97gey.js";import{N as u}from"./Notify-C8VHsc28.js";import{I as P,d as C,a as A}from"./DashboardPage-DTGrdqii.js";import"./index-C7QLzcs0.js";const F=({songs:s,allSongs:l,dispatch:o,song:e,customtheme:d,handleFav:r,favSongs:a,i})=>{var v;const[p,m]=I.useState(""),n=x(c=>c.song.playSong);let w=e.id||e.songId;const g=((v=n[0])==null?void 0:v.id)===w||!1;return t.jsxs("div",{onClick:()=>{o(s?b(!0):b(!1)),o(y(!0)),o(N(l)),o(j(s?e.songId:e.id))},style:{width:"min(99%,500px)",background:"linear-gradient(to right, rgba(0,0,0,.55),rgba(0,0,0,.55))"},className:`${g&&"gradient"} text-[${d.text}] bg-[${d.surface}] shadow-black border-[1px] border-pink-600 h-[56px]  flex rounded-[28px] gap-3 z-0 cursor-pointer items-center relative `,children:[t.jsx(P,{id:(e==null?void 0:e.id)||(e==null?void 0:e.songId),className:`w-[54px] h-[54px] rounded-[100%] ${g&&"active"} `,src:s?e.songImage:e.image[2].url,alt:""}),t.jsxs("h2",{className:"text-lg capitalize ",children:[i+1,". ",s?e.songName.slice(0,16):e.name.slice(0,16)]}),t.jsx(C,{onClick:c=>r(c,e),style:{position:"absolute",right:"60px",color:a.some(c=>s?c.songId===e.songId:c.songId===e.id)?"#ea0b91":"white"}}),t.jsx(A,{onClick:c=>{c.stopPropagation(),m(!0)},className:"absolute right-5 w-5 "}),p&&t.jsx(_,{setIsActive:m,song:e,songs:s})]},s?e.songId:e.id)},_=({setIsActive:s,song:l,songs:o})=>{const e=x(r=>r.fav.customPlaylists),d=async r=>{s(!1);const a={songId:o?l.songId:l.id,songName:o?l.songName:l.name,songImage:o?l.songImage:l.image[2].url},i=await h.addSongToPlaylist("/addSong/"+r,a);i.success?u("success",i.message):u("error",i.message)};return t.jsxs("div",{onClick:r=>{r.stopPropagation()},style:{scrollbarWidth:"none"},className:"w-40 px-2 py-1 h-40 z-10 bg-white rounded-lg text-black absolute right-10 top-10 ",children:[t.jsx("h2",{className:"",children:"Add to"}),t.jsx("ul",{className:"overflow-scroll h-[100%]  flex flex-col gap-2 py-5",children:e==null?void 0:e.map((r,a)=>t.jsx(t.Fragment,{children:t.jsxs("li",{style:{scrollbarWidth:"2px"},onClick:()=>d(r._id),className:"text-center font-semibold hover:font-extraboldx hover:bg-pink-400 rounded-sm",children:[a+1,". ",r.name]},r._id)}))}),t.jsx("button",{className:"absolute right-2 top-1 bg-red-600 text-white px-1 py-[2px]",onClick:r=>{s(!1)},children:"close"})]})},L=({songs:s})=>{const l=S(),o=x(a=>a.theme.value);let e=x(a=>a.song.allSongs);const d=x(a=>a.fav.favList);I.useEffect(()=>{l(f()),l(k())},[]);const r=async(a,i)=>{if(a.stopPropagation(),d.some(n=>n.songId===i.songId)){const n=await h.removeFav("/fav/"+i._id);return n.success?u("success",n.message):u("error",n.message),l(f())}let p={songId:i.id,songName:i.name,songImage:i.image[2].url};const m=await h.addNewFav("/fav/new",p);m.success?u("success",m.message):u("error",m.message),l(f())};return s&&(e=s),t.jsx("div",{style:{width:"min(100vw,600px)",scrollbarWidth:"none"},className:"flex flex-col gap-2 items-center  h-[85vh]  overflow-scroll pb-72",children:e&&e.map((a,i)=>t.jsx(F,{songs:s,allSongs:e,dispatch:l,song:a,customtheme:o,handleFav:r,favSongs:d,i},s?a.songId:a.id))})};export{L as ShowAllSongs,L as default};
